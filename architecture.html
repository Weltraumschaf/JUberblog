<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-09-06 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160906" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JUberblog Project Site &#x2013; Architecture</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/Weltraumschaf/JUberblog">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>JUberblog</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-09-06
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.0-SNAPSHOT
                          <span class="divider">|</span>
                      </li>
                                      <li class="">
                    <a href="http://www.weltraumschaf.de" title="Weltraumschaf">
        Weltraumschaf</a>
                    <span class="divider">Â»</span>
      </li>
        <li class="active ">Architecture</li>
                
              
      
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">JUberblog</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="installation.html" title="Installation">
          <span class="none"></span>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="downloads.html" title="Downloads">
          <span class="none"></span>
        Downloads</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Architecture</a>
          </li>
                              <li class="nav-header">Reports</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/Weltraumschaf" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow Weltraumschaf</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Architecture</h1>
<p>Here you find a more detailed explanation of the basic concept behind JUberblog and some details about the implementation.</p>
<div class="section">
<h2><a name="The_Basic_Idea"></a>The Basic Idea</h2>
<p>The publishing concept is very simple: The publish command crawls a configured directory for <a class="externalLink" href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> files and converts them to static HTML in a web servers document root. So that&#x2019;s all. Nearly.</p>
<p>What about versioning? No database at all? No, no database. In my opinion it make no sense to structure unrelational data like documents into a relational database scheme. Especially if I have to reassemble it from the tables back to a document on each page request. Then adding caching and such. Why not saving documents as is: A document. In a file.</p>
<p>I&#x2019;ve chosen the <a class="externalLink" href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> syntax for the files because it is more readable and easier to maintain than pure HTML. Also I&#x2019;ve added some basic template features (see below). And last but not least, if You really want versioning: Use Git or any other VCS for the directory where you save your Markdown files for the blog. Then you will have full-blown version features with diff and so on.</p>
<p>Ok, version is done by a VCS. What about automatic publishing of new posts? Easy going: Just use a system like <i>cron</i> or <i>atd</i> and at a periodic execution which runs the publisher.</p></div>
<div class="section">
<h2><a name="Publishing_Concepts"></a>Publishing Concepts</h2>
<p>The basic publishing concept is shown in the image below:</p>
<p><img src="images/concept_publish.png" alt="concept publish" /></p>
<p>What does this show? </p>

<ol style="list-style-type: decimal">
  
<li>You have a repository (git or such) in which you store your blog data:
  
<ul>
    
<li>blog posts, sites and drafts</li>
    
<li>CSS, JavaScript and Images</li>
    
<li>templates for generating the content</li>
    
<li><a class="externalLink" href="http://sass-lang.com/">SASS</a> files (optional)</li>
    
<li>whatever you need (optional)</li>
  </ul></li>
  
<li>You have a web server
  
<ul>
    
<li>which has its own clone of the blog dat repo.</li>
    
<li>which points its document root to the <i>public</i> direcotry in this repo</li>
  </ul></li>
  
<li>On that web server you have a <i>cron</i> or <i>atd</i> job running
  
<ul>
    
<li>which frequently pulls changes into the blog data repo</li>
    
<li>which periodically executes the <i>publish</i> sub command of JUberblog</li>
  </ul></li>
  
<li>A local clone of the repository:
  
<ul>
    
<li>here you write your blog posts or sites</li>
    
<li>if ready you push to the remote and they will be published when the cron  jobs kick in</li>
  </ul></li>
</ol>
<p>That&#x2019;s all.</p>
<p>Of course you can imagine various scenarios:</p>

<ul>
  
<li>All of this on a single machine.</li>
  
<li>Host the repository somewehere else remote (GitHub, GitLab, gitolite etc.).</li>
  
<li>Run the publishing on a different machine and rsync the generated content  (<i>public</i> direcotry) to one or more web server.</li>
</ul></div>
<div class="section">
<h2><a name="Model"></a>Model</h2>
<div class="section">
<h3><a name="Data_Files"></a>Data Files</h3>
<p>The pure blog data is stored in plain text files in <a class="externalLink" href="http://daringfireball.net/projects/markdown/syntax">Markdown syntax</a> with some useful extensions (see <a class="externalLink" href="https://github.com/sirthias/pegdown#introduction">Pegdown Processor</a> for details) and an optional preprocessor block for meta data. The format is as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;?juberblog
    // Used for navigation.
    navi: Projects
    // Used for site description.
    description: My personal projects I'm working on
    // Used for site keywords.
    keywords: Projects, Jenkins, Darcs
?&gt;
## The Headline

Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt ut labore et dolore
magna aliquyam erat, sed diam voluptua. At vero eos et
accusam et justo duo dolores et ea rebum. Stet clita kasd
gubergren, no sea takimata sanctus est Lorem ipsum dolor
sit amet.

Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt ut labore et dolore
magna aliquyam erat, sed diam voluptua. At vero eos et
accusam et justo duo dolores et ea rebum.
</pre></div></div></div>
<div class="section">
<h3><a name="Meta_Data"></a>Meta Data</h3>
<p>Meta data in data files are stored in a pre processor block (separated by <tt>&lt;?juberblog</tt> and <tt>?&gt;</tt>). Inside these blocks the prep rocessor recognizes simple key value pairs.</p></div>
<div class="section">
<h3><a name="Pre_Processor_Grammar"></a>Pre Processor Grammar</h3>

<div class="source">
<div class="source"><pre class="prettyprint">NL    = [ '\r' ] '\n' ;
ALPHA = 'a' .. 'Z' ;
NUM   = '0' .. '9' ;
ALNUM = ALPHA | NUM ;

metadata       = '&lt;?juberblog', NL, { key_value_pair NL }, '?&gt;' ;
comment        = '//' [^NL]* NL ;
key_value_pair = key, ':', value ;
key            = ALNUM { ALNUM } ;
value          = ANY_WORD, NL ;
</pre></div></div>
<p>You can add key values what you like. All key values from the pre processor will be assigned as variables to templates. But the these special ones are used internally for content generation:</p>

<ul>
  
<li><tt>navi</tt>: This will be used to generate navigation links in the layout.</li>
  
<li><tt>description</tt>: This will be used as description in the meta of the layout and  the feed data.</li>
  
<li><tt>keywords</tt>: This will be used as keywords in the meta of the layout.</li>
</ul></div>
<div class="section">
<h3><a name="Runtime_Model_Representation"></a>Runtime Model Representation</h3>
<p>TODO</p>
<p><img src="images/model.png" alt="model" /></p></div>
<div class="section">
<h3><a name="Templating"></a>Templating</h3>
<p>TODO</p>
<p><img src="images/template_and_filters.png" alt="template and filters" /></p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016
                        <a href="http://www.weltraumschaf.de">Weltraumschaf</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
